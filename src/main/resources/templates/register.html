<!DOCTYPE html>
<html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
    <meta http-equiv="Expires" CONTENT="0">
    <meta http-equiv="Cache-Control" CONTENT="no-cache">
    <meta http-equiv="Pragma" CONTENT="no-cache">
    <meta name="renderer" content="webkit" />
    <title>注册</title>
    <meta name="keywords" content="WeCenter3.31仿知乎模板" />
    <meta name="description" content="WeCenter仿知乎模板，支持WeCenter3.31，WeCenter3.32，WeCenter3.33"  />
    <base href="http://localhost:8088/springboot/" /><!--[if IE]></base><![endif]-->
    <link href="css/azhihu/img/favicon.ico?v=20200516" rel="shortcut icon" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/icon.css" />
    <link href="css/default/common.css?v=20200516" rel="stylesheet" type="text/css" />
    <link href="css/default/link.css?v=20200516" rel="stylesheet" type="text/css" />
    <link href="js/plug_module/style.css?v=20200516" rel="stylesheet" type="text/css" />
    <link href="css/default/register.css?v=20200516" rel="stylesheet" type="text/css" />
    <link href="css/azhihu/azhihu.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="js/highlight/styles/tomorrow.css">
    <script type="text/javascript">
        var _1147EE59C2EAF626C82066D5B32FD65B="";
        var G_POST_HASH=_1147EE59C2EAF626C82066D5B32FD65B;
        var G_INDEX_SCRIPT = "?/";
        //var G_SITE_NAME = "WeCenter仿知乎模板";
        var G_BASE_URL = "http://localhost:8088/springboot";
        //var G_STATIC_URL = "http://azhihu.cssroom.com/static";
        //var G_UPLOAD_URL = "http://azhihu.cssroom.com/uploads";
        var G_USER_ID = "";
        var G_USER_NAME = "";
        var G_UPLOAD_ENABLE = "N";
        var G_UNREAD_NOTIFICATION = 0;
        var G_NOTIFICATION_INTERVAL = 100000;
        var G_CAN_CREATE_TOPIC = "";
        var G_ADVANCED_EDITOR_ENABLE = "Y";
        var FILE_TYPES = "jpg,jpeg,png,gif,zip,doc,docx,rar,pdf,psd";
        var G_DRAFT_ENABLED = "N";
        var G_PER_PAGE = "10";
        var G_INDEX_PER_PAGE = "20";
        var G_PRIVATEKEY = "pvjxzjmzvewfscft";
        var G_IV = "qvibvaiwgouxwjeu";
        var G_QUICK_PUBLISH_HUMAN_VALID = "0";
        var editor_type="wangeditor";
    </script>
    <script src="js/jquery.2.js?v=20200516" type="text/javascript"></script>
    <script src="js/jquery.form.js?v=20200516" type="text/javascript"></script>
    <script src="js/plug_module/plug-in_module.js?v=20200516" type="text/javascript"></script>
    <script src="js/aws.js?v=20200516" type="text/javascript"></script>
    <script src="js/aw_template.js?v=20200516" type="text/javascript"></script>
    <script src="js/layer/layer.js?v=20200516" type="text/javascript"></script>
    <script src="js/app.js?v=20200516" type="text/javascript"></script>
    <script type="text/javascript" src="js/compatibility.js"></script>
    <script type="text/javascript" src="js/laydate/laydate.js"></script>
    <script type="text/javascript" src="js/slide_captcha/gt.js"></script>
    <script src="js/crypto-js.js"></script>
    <script src="js/highlight/highlight.pack.js"></script>
    <script src="js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="js/toastr.min.js"></script>
    <link href="css/toastr.min.css" rel="stylesheet" type="text/css" />
    <link href="layui/css/layui.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="layui/layui.js"></script>
    <script type="text/javascript">
        toastr.options.positionClass = 'toast-center-center';
        toastr.options.showDuration = '1000';
        toastr.options.hideDuration = '3000';
        toastr.options.timeOut = '1500';
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre').forEach((block) => {
                hljs.highlightBlock(block);
            });
        });
    </script>
    <style type="text/css">
        .geetest_radar_tip_content{
            position: initial !important;
        }
    </style>
    <!--[if lte IE 8]>
    <script type="text/javascript" src="js/respond.js"></script>
    <![endif]-->
    <!--头部公共注入钩子-->
    <!--end头部公共注入钩子-->
</head>
<noscript unselectable="on" id="noscript">
    <div class="aw-404 aw-404-wrap container">
        <img src="http://azhihu.cssroom.com/static/common/no-js.jpg">
        <p>你的浏览器禁用了JavaScript, 请开启后刷新浏览器获得更好的体验!</p>
    </div>
</noscript><style type="text/css">
    .oldPwdTip {
        position: absolute;
        color: rgba(153, 153, 153, 1);
        margin-top: 6px;
        margin-left: 0px;
        text-align: left;
        left: 0px;
        top: -5px;
        padding: 0 15px;
        width: 100%;
        height: 40px;
        line-height: 38px;
        color: #777777;
    }
    body {
        background-image: url(css/azhihu/img/login_bg.png);
        background-repeat: no-repeat;
        background-color: #b8e5f8;
        background-size: cover;
        width: 100%;
        height: 100vh;
        overflow: auto;
        padding-right: 15px;
    }
    .aw-register-box {
        width: 432px;
        margin: 0 auto;
        background-color: #fff;
        border: 0;
        border-radius: 2px;
        -webkit-box-shadow: 0 1px 3px rgba(26,26,26,.1);
        box-shadow: 0 1px 3px rgba(26,26,26,.1);
        margin-top:100px;
    }
    .aw-register-box .logo{
        margin:0 auto;
    }
    .aw-register-box h1{
        text-align:center;
        color: #0084ff;
        font-size: 22px;
        margin: 13px 0 0;
    }
    .aw-register-box .mod-body .form-control {
        border: 0;
        border-bottom: 1px solid #e6e6e6;
        border-radius: 0;
    }
    .btn-blue{
        background-color: #0084ff;
    }
    .aw-footer,.aw-footer-wrap a{
        color:#fff;
    }
    @media (max-width: 769px){
        .aw-register-box{
            width: 100%;
            margin-top: 20px;
            margin-left: 10px;
        }
        .aw-register-box .mod-body {
            padding: 50px 10px;
        }
    }
</style>
<div class="aw-register-box">
    <div class="mod-head">
        <img src="css/azhihu/img/login_logo.png" alt="" />
        <h1>注册新用户</h1>
    </div>
    <div class="mod-body">
        <form class="aw-register-form" id="register_form">
            <ul>
                <li class="alert alert-danger collapse error_message text-left">
                    <i class="icon icon-delete"></i> <em></em>
                </li>
                <li>
                    <input class="aw-register-email form-control" type="text" placeholder="邮箱" name="email" tips="请输入你常用的电子邮箱作为你的账号" value="" errortips="邮箱格式不正确" />
                </li>
                <li>
                    <label class="oldPwdTip aw-register-pwd-label" onclick="$(this).hide();$('#aw-register-pwd').focus();">密码</label>
                    <input class="aw-register-pwd form-control" id='aw-register-pwd' name="password" type="password" tips="请输入 6-16 个字符,区分大小写" errortips="密码不符合规则" onfocus="hideOldPwdTip('aw-register-pwd');" onblur="toggleOldPwdTip('aw-register-pwd',this.value);"/>
                    <input id="aw-login-user-repassword" type="hidden" name="password" />
                </li>
                <li class="aw-register-verify">
                    <!--style="background-color: #92B8B1;" class="pull-right" id="captcha"-->
                    <button type="button" id="second" class="pull-right" style="width: 100px;height: 40px;border-radius: 15px;background-color:#bce8f1;opacity:0.9;outline: none;-webkit-text-fill-color: black;font-weight: 900" value="123">获取验证码</button>
                    <input type="text" id="random" class="form-control" name="seccode_verify" placeholder="验证码" />
                    <input type="text" id="span" hidden>
                </li>
                <li class="last">
                    <label><input type="checkbox" id="cb" value="agree" name="agreement_chk" /> 我同意</label>
                    <span class="site-demo-button" id="layerDemo" style="margin-bottom: 0;">
                        <a href="javascript:;" data-method="notice" class="layui-btn" style="background-color: white;color: black">用户协议</a>
                    </span>
                    <a href="Reception/L/login" class="pull-right">已有账号?</a>
                    <!-- <a style="margin-right:8px;" href="http://azhihu.cssroom.com/?/account/register/type-email" class="pull-right">邮箱注册</a> -->
                </li>
                <li class="clearfix">
                    <input type="button" class="btn btn-large btn-blue btn-block" value="注册" onclick="zc()">
                </li>
            </ul>
        </form>
    </div>
    <div class="mod-footer"></div>
</div>
<script>
    layui.use('layer', function() {
        var $ = layui.jquery,
            layer = layui.layer;
        var active = {
            notice: function() {
                //示范一个公告层
                layer.open({
                    type: 1,
                    title: false //不显示标题栏
                    ,
                    closeBtn: false,
                    area: ['70%', '80%'],
                    shade: 0.8,
                    id: 'LAY_layuipro' //设定一个id，防止重复弹出
                    ,
                    btn: ['关闭'],
                    btnAlign: 'c',
                    moveType: 1 //拖拽模式，0或者1
                    ,
                    content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;">欢迎您来到大问号<br><br><h3>重要提示：</h3><br>请您仔细阅读以下条款，并确认您已完全理解本协议之规定，尤其是免除及限制责任的条款、知识产权条款、法律适用及争议解决条款。<br>若您对本声明或本协议任何条款有异议，请停止注册或使用大问号（jianshu.com，包括手机、电脑等移动设备客户端，下同）所提供的全部服务。<br><br><h3>一、协议的接受、变更与补充</h3><br>1、勾选本协议前选项框并点击“注册”，将视为您签署了本协议，表明您自愿接受本协议全部条款的约束，本协议将构成您与上海佰集科技有限公司及其经营的“大问号”平台（以下统称“大问号”，包括相关关联方）之间具有约束力的法律文件。无论您是进入大问号浏览网页，还是在大问号上发布任何内容，或者是直接或通过各类方式（如站外API引用等）间接使用大问号服务和数据的行为，都将被视作已无条件接受本声明所涉全部内容。<br>2、大问号有权利对本协议进行修改，协议修改后，大问号将通过在相关页面公告或发送通知等方式公布修改的内容，修改后的协议一经公布即有效的代替原协议。如果您不同意本协议的修改，请立即停止访问或使用本网站或取消已经获得的服务；如果您选择继续访问或使用本网站，则视为您已接受本协议的修改。<br>3、签署的本协议所列明的条款，并不能完全涵盖您与大问号之间所有的权利和义务。因此，大问号不定期公布的其他声明、规则等均视为本协议之补充协议，为本协议不可分割的组成部分，与本协议具有同等法律效力。<br>4、如本协议与大问号平台其它协议条款不一致，以其它协议条款内容为准。<br><br><h3>二、帐号密码与注册、登录</h3><br><br><br>1、帐号的取得<br>(1)您确认，在您开始注册大问号前，已经具备中华人民共和国法律规定的与您行为相适应的民事行为能力。若您不具备前述与您行为相适应的民事行为能力，则您及您的监护人应依照法律规定承担因此而导致的一切后果。<br>(2)您注册成功后，即成为大问号注册用户，用户须对在大问号的注册信息的真实性、合法性、有效性承担全部责任。您可自行创建、修改昵称，但用户名和昵称的命名及使用应遵守相关法律法规并符合网络道德，不得冒充他人或恶意注册使人误认；不得利用他人的名义发布任何信息；不得恶意使用注册帐号导致其他用户误认；用户名和昵称中不能含有任何侮辱、诽谤、淫秽或暴力等侵害他人合法权益或违反公序良俗的词语。如您违反前述规定，大问号有权随时限制或拒绝您使用该账号，甚至注销该账号。<br>(3)用户名的管理<br>1)请勿以党和国家领导人或其他名人的真实姓名、字、号、艺名、笔名、头衔等注册和使用昵称（如确为本人，需要提交相关证据并通过审核方可允许使用）；<br>2)请勿以国家组织机构或其他组织机构的名称等注册和使用昵称（如确为该机构，需要提交相关证据并通过审核方可允许使用）；<br>3)请勿注册和使用与其他网友相同、相仿的用户名或昵称；<br>4)请勿注册和使用不文明、不健康的用户名和昵称；<br>5)请勿注册和使用易产生歧义、引起他人误解或带有各种奇形怪状符号的用户名和昵称。<br>6)用户以虚假信息骗取账号名称注册，或账号头像、简介等注册信息存在违法和不良信息的，大问号将暂停或注销。<br>2、请您妥善保管您注册时填写的用户帐号和密码，不要将帐号密码告知他人，因用户原因导致帐号或密码泄露而造成的法律后果由用户负责。同时，用户还应当对以此帐号登录进行的所有活动和事件承担全部后果与法律责任。<br>3、若您的帐号或密码遗失，可以通过注册信息按照相关步骤找回密码，若您发现账号遭到未授权的使用或存在其他安全漏洞的情况，应立即告知大问号。<br><br>我们此后的征途是星辰大海 ^_^</div>',
                });
            },
        };
        $('#layerDemo .layui-btn').on('click', function() {
            var othis = $(this),
                method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });
    });
</script>
<script type="text/javascript">
    function zc(){
        if (yemail()){
            if (ypwd()) {
                console.log($("#cb").is(":checked"));
                if ($("#random").val() == $("#span").val()) {
                    if ($("#cb").is(":checked")){
                        //alert("注册")
                        $.ajax({
                            type:"post",
                            data:{email:$("[name=email]").val(),pwd:$("[name=password]").val()},
                            url:"Reception/L/toRegister",
                            async:true,
                            success:function (da) {
                                console.log(da)
                                if (da){
                                    $.ajax({
                                        type:"post",
                                        data:{email:$("[name=email]").val(),pwd:$("[name=password]").val()},
                                        url:"Reception/L/toLogin",
                                        async:true,
                                        success:function (da) {
                                            console.log(da);
                                            if (da==0)
                                                window.location.href="Reception/tb_Article/queryAll";
                                            if(da==2)
                                                toastr.error("账号密码错误")
                                            if (da==1)
                                                toastr.error("账号已被封禁")
                                        }
                                    })
                                }else
                                    toastr.error("注册失败")
                            }
                        })
                    }else
                        toastr.error("请选择我同意用户协议")
                } else {
                    toastr.error("验证码不正确")
                }
            }
        }
    }

    $("#second").click(function (){
        if ( yemail()){
            byemail();
            if ($("#span").val()!='')
                setTime($("#second"));//开始倒计时
            else
                toastr.error("邮箱已存在")
        }
    });
    //查询邮箱是否存在
    function byemail() {
        $.ajax({
            type:"post",
            data:{email:$("[name=email]").val(),sta:0},
            url:"Reception/User/byEmail",
            async:false,
            success:function (da) {
                if (da!=null)
                    $("#span").val(da);
            }
        })
    }

    //60s倒计时实现逻辑
    var countdown = 60;
    function setTime(obj) {
        if (countdown == 0) {
            obj.prop('disabled', false);
            obj.text("获取验证码");
            countdown = 60;//60秒过后button上的文字初始化,计时器初始化;
            return;
        } else {
            obj.prop('disabled', true);
            obj.text("("+countdown+"s)") ;
            countdown--;
        }
        setTimeout(function() { setTime(obj) },1000) //每1000毫秒执行一次
    }
    //验证email
    function yemail(){
        $("[name=email]").trigger("blur");
        if ($("[name=email]").parent().find(".no").length>0)
            return false;
        else{
            return true;
        }
    }
    //验证密码
    function ypwd(){
        $("[name=password]").trigger("blur");
        if ($("[name=password]").parent().find(".no").length>0)
            return false;
        else{
            return true;
        }
    }
    $(document).ready(function ()
    {
        verify_register_form('#register_form');
        /* 注册页面验证 */
        function verify_register_form(element){
            $(element).find('[type=text], [type=password]').on({
                focus : function(){
                    if (typeof $(this).attr('tips') != 'undefined' && $(this).attr('tips') != '')
                    {
                        $(this).parent().append('<b class="aw-reg-tips">' + $(this).attr('tips') + '</b>');
                    }
                },
                blur : function(){
                    if ($(this).attr('tips') != ''){
                        switch ($(this).attr('name')){
                            case 'email' :
                                $(this).parent().find('.aw-reg-tips').detach();
                                var emailreg = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
                                if (!emailreg.test($(this).val())){
                                    $(this).parent().find('.aw-reg-tips').detach();
                                    $(this).parent().append('<b class="aw-reg-tips aw-reg-err"><span class="no"></span><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</b>');
                                    return;
                                }else{
                                    $(this).parent().find('.aw-reg-tips').detach();
                                    $(this).parent().append('<b class="aw-reg-tips aw-reg-right"><span class="ok"></span><i class="aw-icon i-followed"></i></b>');
                                }
                                return;
                            case 'password' :
                                $(this).parent().find('.aw-reg-tips').detach();
                                if ($(this).val().length >= 0 && $(this).val().length < 6){
                                    $(this).parent().find('.aw-reg-tips').detach();
                                    $(this).parent().append('<b class="aw-reg-tips aw-reg-err"><span class="no"></span><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</b>');
                                    return;
                                }if ($(this).val().length > 17){
                                    $(this).parent().find('.aw-reg-tips').detach();
                                    $(this).parent().append('<b class="aw-reg-tips aw-reg-err"><span class="no"></span><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</b>');
                                    return;
                                }else{
                                    $(this).parent().find('.aw-reg-tips').detach();
                                    $(this).parent().append('<b class="aw-reg-tips aw-reg-right"><span class="ok"></span><i class="aw-icon i-followed"></i></b>');
                                }
                                return;
                        }
                    }

                }
            });
        }
    });
</script>

<div class="aw-footer-wrap">
    <div class="aw-footer">
        Copyright © 2020, All Rights Reserved</span>
        <span class="hidden-xs">Powered By <a href="http://www.wecenter.com/?copyright" target="blank">WeCenter 3.5.1</a></span>
    </div>
</div>
</body>
<!---->
</html>